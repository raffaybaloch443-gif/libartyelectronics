<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Libarty Electronics</title>
<link rel="icon" type="image/x-icon" href="./accets/favicone.png">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body { background:#fff; }
.logo{ height:60px; width:auto; }
.header-icons img{ width:26px; height:26px; }
.like-card { border:1px solid #e6e6e6; border-radius:8px; overflow:hidden; transition: box-shadow .2s; }
.like-card:hover{ box-shadow:0 6px 18px rgba(0,0,0,0.08); }
.like-card img{ width:100%; height:180px; object-fit:contain; background:#f8f9fa; }
.like-btn{ background:transparent; border:none; color:#dc3545; font-size:20px; }
.nav-badge{ font-size:12px; }
</style>
</head>
<body>

<!-- TOP HEADER -->
<div class="container-fluid border-bottom py-2">
  <div class="row align-items-center">

    <!-- LOGO -->
    <div class="col-lg-2 col-md-3 col-6">
      <img src="./accets/Logo1.png" class="logo img-fluid" alt="Logo">
    </div>

    <!-- SEARCH BAR -->
    <div class="col-lg-6 col-md-6 col-12 my-2 my-md-0">
      <div class="input-group">
        <input type="text" class="form-control" placeholder="Search for products">
        <button class="btn btn-outline-secondary">🔍</button>
      </div>
    </div>

    <!-- ICONS RIGHT -->
    <div class="col-lg-4 col-md-3 col-6 d-flex justify-content-end">
      <div class="header-icons">
        <a href="cart.html" class="position-relative me-2" id="cartLink" title="View Cart">
          <img src="./icons/shopping-cart.svg" alt="Cart">
          <span id="cartCountHeader" class="badge bg-danger rounded-pill" style="position:absolute; top:-6px; right:-6px; font-size:10px; display:none;">0</span>
        </a>
        <a href="likes.html"><img src="./icons/heart.svg" alt="Wishlist"></a>
        <div class="dropdown">
          <img src="./icons/user.svg" alt="User" class="dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" style="cursor: pointer;">
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="cart.html">Cart</a></li>
            <li><a class="dropdown-item" href="likes.html">Likes</a></li>
          </ul>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- All Categories (same as index) -->
<div class="container-fluid py-2 border-bottom">
  <div class="container d-flex align-items-center justify-content-between">
    <div class="d-flex align-items-center gap-4">
      <button class="btn btn-warning">All Categories</button>
      <nav class="d-flex gap-3">
        <a href="index.html" class="text-decoration-none text-dark">Home</a>
        <!-- <a href="#" class="text-decoration-none text-dark">Shop</a> -->
        <!-- <a href="#" class="text-decoration-none text-dark">Mega menu</a>
        <a href="#" class="text-decoration-none text-dark">Pages</a> -->
        <a href="#" class="text-decoration-none text-dark">Account</a>
        <a href="cart.html" class="text-decoration-none text-dark active">Cart</a>
        <a href="likes.html" class="text-decoration-none text-dark active">Likes</a>
      </nav>
    </div>
    <div class="d-flex align-items-center">
      <a class="btn btn-warning" href="index.html">Back to Shop</a>
    </div>
  </div>
</div>
    </div>
  </div>
</nav>

<!-- Likes Section -->
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="mb-0">Liked Items</h3>
    <button class="btn btn-sm btn-outline-secondary" id="clearLikes">Clear All</button>
  </div>

  <div class="row g-3" id="likesList">
    <!-- Sample liked cards will be inserted by JS -->
  </div>

  <div id="noLikesMsg" class="text-center text-muted mt-4" style="display:none;">
    <p class="mb-0">No liked items yet. Browse the shop and click the heart to add items here.</p>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
<script>
const LS_KEY = 'libarty_likes';
function getLikes(){ try { return JSON.parse(localStorage.getItem(LS_KEY) || '[]'); } catch(e){ return []; } }
function saveLikes(items){ localStorage.setItem(LS_KEY, JSON.stringify(items)); }

const likesList = document.getElementById('likesList');
const likesCount = document.getElementById('likesCount');
const noLikesMsg = document.getElementById('noLikesMsg');

function renderLikes(items){
  likesList.innerHTML='';
  if(!items.length){ noLikesMsg.style.display='block'; likesCount.textContent='0'; return; }
  noLikesMsg.style.display='none';
  likesCount.textContent = items.length;
  items.forEach(item=>{
    const col = document.createElement('div'); col.className='col-lg-3 col-md-4 col-sm-6';
    col.innerHTML = `
      <div class="like-card">
        <img src="${item.img}" alt="${item.name}">
        <div class="p-3">
          <div class="d-flex justify-content-between align-items-start">
            <h6 class="mb-1">${item.name}</h6>
            <button class="like-btn" data-id="${item.id}" title="Remove">❤</button>
          </div>
          <div class="text-muted">${item.price}</div>
          <div class="mt-3 d-flex gap-2">
            <button class="btn btn-sm btn-warning w-100 add-to-cart" data-id="${item.id}">Add to Cart</button>
          </div>
        </div>
      </div>`;
    likesList.appendChild(col);
  });
}

function getCart(){ try { return JSON.parse(localStorage.getItem('libarty_cart') || '[]'); } catch(e){ return []; } }
function saveCart(items){ localStorage.setItem('libarty_cart', JSON.stringify(items)); }
function updateCartCount(){ const cnt = getCart().length; const badge = document.getElementById('cartCountHeader'); if(!badge) return; badge.textContent = cnt; badge.style.display = cnt? 'inline-block':'none'; }
function addToCart(item){ let items = getCart(); const found = items.find(x=>x.id===item.id); if(found){ found.qty = (found.qty||1)+1; } else { items.push({...item, qty:1}); } saveCart(items); updateCartCount(); try{ alert('Added to cart'); }catch(e){} }

function setup(){
  // Load real likes from localStorage
  let items = getLikes();
  renderLikes(items);

  // Click handlers: remove like and add to cart
  likesList.addEventListener('click', e=>{
    const likeBtn = e.target.closest && e.target.closest('.like-btn');
    if(likeBtn){
      const id = likeBtn.dataset.id;
      items = items.filter(x=>x.id!==id);
      saveLikes(items);
      renderLikes(items);
      return;
    }

    const addBtn = e.target.closest && e.target.closest('.add-to-cart');
    if(addBtn){
      const id = addBtn.dataset.id;
      const it = getLikes().find(x=>x.id===id);
      if(it) addToCart(it);
      return;
    }
  });

  // Clear all
  document.getElementById('clearLikes').addEventListener('click', ()=>{ items = []; saveLikes(items); renderLikes(items); });

  // Ensure header badge shows count on load
  const badge = document.getElementById('likesCount'); if(badge) badge.textContent = getLikes().length;
  // show cart count too
  updateCartCount();
}

setup();
</script>
</body>
</html>
